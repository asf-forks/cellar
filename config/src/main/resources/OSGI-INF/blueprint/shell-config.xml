<?xml version="1.0" encoding="UTF-8"?>

<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0" default-activation="lazy">

    <!-- Command Bundle -->
    <command-bundle xmlns="http://karaf.apache.org/xmlns/shell/v1.0.0">
        <command name="cluster/config-list">
            <action class="net.cellar.config.shell.ListCommand">
                <property name="clusterManager" ref="clusterManager"/>
            </action>
            <completers>
                <ref component-id="allGroupCompleter"/>
            </completers>
        </command>
        <command name="cluster/config-proplist">
            <action class="net.cellar.config.shell.PropListCommand">
                <property name="clusterManager" ref="clusterManager"/>
            </action>
            <completers>
                <ref component-id="allGroupCompleter"/>
            </completers>
        </command>
        <command name="cluster/config-propset">
            <action class="net.cellar.config.shell.PropSetCommand">
                <property name="clusterManager" ref="clusterManager"/>
                <property name="groupManager" ref="groupManager"/>
            </action>
            <completers>
                <ref component-id="allGroupCompleter"/>
            </completers>
        </command>

    </command-bundle>

    <bean id="allGroupCompleter" class="net.cellar.core.shell.completers.AllGroupsCompleter">
        <property name="groupManager" ref="groupManager"/>
    </bean>

    <bean id="allFeatureCompleter" class="net.cellar.config.shell.completers.ClusterConfigCompleter">
        <property name="groupManager" ref="groupManager"/>
        <property name="clusterManager" ref="clusterManager"/>
    </bean>

</blueprint>
